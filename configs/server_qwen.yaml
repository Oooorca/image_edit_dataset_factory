paths:
  project_root: .
  data_root: ./data
  output_root: ./outputs
  logs_root: ./logs

ingest:
  include_categories:
    - 人物物体一致性
    - 物体一致性
    - 物理变化
  recursive: true
  max_images_per_category: 1000

filter:
  enabled: true
  min_width: 512
  min_height: 512
  reject_grayscale: true
  reject_borders: false

backends:
  use_modelscope: false
  layered_backend: api
  edit_backend: api
  device: cpu

services:
  api_mode: true
  request_batch_size: 1
  layered:
    enabled: true
    endpoint: http://127.0.0.1:8101
    timeout_sec: 180
    max_retries: 2
    backoff_sec: 1.0
    send_mode: path
    fallback_to_mock: false
  edit:
    enabled: true
    endpoint: http://127.0.0.1:8102
    timeout_sec: 360
    max_retries: 2
    backoff_sec: 1.0
    send_mode: path
    fallback_to_mock: false

modelscope:
  enabled: true
  cache_dir: /data/modelscope_cache
  qwen_layered_model_dir: qwen/Qwen-Image-Layered
  qwen_edit_model_dir: Qwen/Qwen-Image-Edit

generate:
  dry_run: false
  category_to_task:
    人物物体一致性: consistency_edit
    物体一致性: semantic_edit
    物理变化: structural_edit
  subtypes:
    structural_edit: move
    semantic_edit: replace
    consistency_edit: identity

qa:
  allowed_region_dilation_px: 7
  max_mse_outside_region: 2.0
  min_ssim_outside_region: 0.995
  max_changed_pixel_ratio_outside_region: 0.01

pipeline:
  ingest: true
  decompose: true
  generate: true
  export: true
  qa: true
  resume: true

json_logs: true
